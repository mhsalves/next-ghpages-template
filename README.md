# next-ghpages-template
A template for clients should use the Github Pages, React and SSR using [NextJS](https://nextjs.org/).

## This project uses the main follow dependencies

- [NextJS](https://nextjs.org/) as React Framework for SSR. (Details in [next-ghpages-template#2](https://github.com/mhsalves/next-ghpages-template/pull/2))


## Docs

- [How configure Github Pages](#configuring-github-pages)
- [How make a deploy](#deploy)
  - [Configuring my personal page](#configuring-my-personal-page)

### Configuring Github Pages

See this [article](https://help.github.com/en/github/working-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site).

### Deploy

This project has a simple deploy system to github pages.
```
npm run deploy
```
By default, we use the `master` branch to store the source code and the `gh-pages` branch to the compiled files for page.

The main script execute the others deploy scripts which do a specify step into deploy. Follow the scripts:
- `deploy:export` generates the build files and export them from [NextJS](https://nextjs.org/) scripts (build and export).
- `deploy:setup` add additional files for gh-pages or any others, like `.nojekyll` or `CNAME`.
- `deploy:commit` creates a commit with the new deploy files, in other words, create a commit with the `out` folder generated by `npm run deploy:export`.
- `deploy:stage` creates a stage branch with the commit created previously and start a subtree with him.
- `deploy:push` makes a push forced to the github page branch (gh-pages).

#### Configuring my personal page

When we're creating our personal page (for example, mhsalves.github.io) the github force us to use as branch page the `master` branch. So we need to use the `master` branch for the compiled files.

In this case, we still use this deploy method, but we need update some things. First we need create a new source branch to your project, for example, `my-source` (you can use any name, but I advice to use a name which make sense like `source/master`, `main` and etc).

Second, configure the project into Settings to make the `my-source` branch be the default branch.

<img width="768" alt="Settings Panel to set default branch" src="https://user-images.githubusercontent.com/30807170/67357750-49617280-f52c-11e9-9669-724006a33521.png">

Third, update the script `deploy:push` in `package.json` file setting the `gh-pages` to `master`.

In the end, your source branch will be `my-source` so all pull request will be to him, the compiled files branch will be `master` and every time your execute the deploy script all compiled files will be pushed to `master` branch.

Any problems, create an [issue](https://github.com/mhsalves/next-ghpages-template/issues/new).
 